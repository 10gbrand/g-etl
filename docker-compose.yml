# G-ETL Docker Compose
#
# Kör TUI:    docker compose run --rm admin
# Starta Huey: docker compose up huey
# Stoppa:      docker compose down

services:
  admin:
    image: ghcr.io/10gbrand/g-etl:latest
    volumes:
      # Data persistence (resultat sparas här)
      - ./data:/app/data
      # Lokal geodata (GeoPackage, Shapefile, etc.)
      - ./input_data:/app/input_data:ro
      # Custom config (valfritt)
      - ./config:/app/config:ro
      # Custom SQL (valfritt)
      - ./sql:/app/sql:ro
    environment:
      # Lantmäteriet API (valfritt)
      - LM_API_KEY=${LM_API_KEY:-}
      - LM_API_SECRET=${LM_API_SECRET:-}
    # Krävs för TUI
    tty: true
    stdin_open: true

  huey:
    build: docker/huey
    ports:
      - "8080:80"
    volumes:
      - ./data:/data:ro
